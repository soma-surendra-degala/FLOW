<header
  class="flex items-center justify-between bg-neutral-950 px-4 py-3 border-b border-neutral-800 dark:bg-white dark:border-gray-200">

  <!-- Left: Hamburger + Logo -->
  <div class="flex items-center gap-3">
    <!-- Hamburger (only mobile) -->
    <button class="text-2xl text-cyan-400 md:hidden" (click)="toggleSidebar.emit()">
      <i class="bi bi-list"></i>
    </button>

    <!-- Logo -->
    <div
      class="font-bold text-base sm:text-lg tracking-wide text-cyan-400 flex items-center gap-1 dark:text-cyan-600">
      <img src="assets/bg.png" class="w-8 sm:w-10" /> Student Portal
    </div>
  </div>

  <!-- Right: Bell + Welcome + Logout -->
  <div class="flex items-center gap-3 sm:gap-4">
    
    <!-- Notification Bell -->
    <div class="relative">
      <i class="bi bi-bell text-xl sm:text-2xl cursor-pointer text-black dark:text-neutral-900"
         (click)="toggleNotifications()"></i>

      <!-- Badge -->
      <span *ngIf="notifications.length > 0"
            class="absolute -top-1 -right-1 sm:-top-2 sm:-right-2 bg-red-500 text-white text-[10px] sm:text-xs font-bold px-1 sm:px-1.5 py-0.5 rounded-full">
        {{ notifications.length }}
      </span>

      <!-- Dropdown -->
      <div *ngIf="showDropdown">

        <!-- Desktop Dropdown (Centered Card) -->
        <div class="hidden sm:block absolute left-1/2 transform -translate-x-1/2 mt-3 w-80 max-h-80 overflow-y-auto 
                    bg-white text-black rounded-xl shadow-2xl p-3 z-50">
          <h3 class="text-lg font-semibold border-b pb-2 mb-2">Notifications</h3>

          <div *ngFor="let n of notifications" class="border-b last:border-b-0 py-2">
            <div class="flex justify-between items-center mb-1">
              <strong class="block text-gray-900">{{ n.title }}</strong>
              <small class="text-gray-500">({{ n.createdAt | date:'mediumDate' }})</small>
            </div>
            <p class="text-sm text-gray-700">{{ n.message }}</p>
          </div>

          <div *ngIf="notifications.length === 0" class="text-center text-gray-500 py-4">
            No notifications
          </div>
        </div>

        <!-- Mobile Dropdown (Full-Width Bottom Sheet) -->
        <div class="sm:hidden fixed top-10 left-0 w-full max-h-[60vh] overflow-y-auto 
                    bg-white text-black rounded-t-2xl shadow-2xl p-4 z-50 animate-slideUp">
          <div class="flex justify-between items-center border-b pb-2 mb-2">
            <h3 class="text-base font-semibold">Notifications</h3>
            <button class="text-gray-500 text-xl" (click)="showDropdown=false">
              <i class="bi bi-x-lg"></i>
            </button>
          </div>

          <div *ngFor="let n of notifications" class="border-b last:border-b-0 py-2">
            <div class="flex justify-between items-center mb-1">
              <strong class="block text-gray-900">{{ n.title }}</strong>
              <small class="text-gray-500">({{ n.createdAt | date:'mediumDate' }})</small>
            </div>
            <p class="text-sm text-gray-700">{{ n.message }}</p>
          </div>

          <div *ngIf="notifications.length === 0" class="text-center text-gray-500 py-4">
            No notifications
          </div>
        </div>

      </div>
    </div>

    <!-- Welcome Text -->
    <span class="hidden sm:inline text-xs text-neutral-400 dark:text-gray-600 sm:text-sm">
      Welcome, <b>{{ studentName }}</b> ðŸ‘‹
    </span>

    <!-- Logout Button -->
    <button
      class="hidden sm:block bg-cyan-700 px-3 sm:px-4 py-1 sm:py-1.5 rounded-lg text-white hover:bg-cyan-500 transition"
      (click)="onLogout()">
      <i class="bi bi-box-arrow-left pr-0.5"></i>Logout
    </button>
  </div>
</header>
